{"ast":null,"code":"import _slicedToArray from\"C:/Users/Amir/Documents/AmirShop2/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import FormContainer from\"../components/FormContainer\";import{Button,Col,Form,Row}from\"react-bootstrap\";import{Link}from'react-router-dom';import{useDispatch,useSelector}from\"react-redux\";import{getUserDetails,login,register,updateUserProfile}from\"../actions/userActions\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import{USER_UPDATE_PROFILE_FAIL,USER_UPDATE_PROFILE_RESET}from\"../constants/userConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileScreen(_ref){var history=_ref.history;var userLogin=useSelector(function(state){return state.userLogin;});var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userInfo=userLogin.userInfo;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var dispatch=useDispatch();useEffect(function(){if(!userInfo){history.push('/login');}else{if(!user||!user.name||success){dispatch({type:USER_UPDATE_PROFILE_RESET});dispatch(getUserDetails('profile'));}else{setName(user.name);setEmail(user.email);}}},[dispatch,history,userInfo,user,success]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!=confirmPassword){setMessage('password do not match');}else{dispatch(updateUserProfile({'id':user._id,'name':name,'email':email,'password':password}));}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:'name',children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:'email',children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:'password',children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"enter password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:'passwordConfirm',children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"confirm password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"update\"})]})]}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"})})]});}export default ProfileScreen;","map":{"version":3,"sources":["C:/Users/Amir/Documents/AmirShop2/backend/frontend/src/screens/ProfileScreen.js"],"names":["React","useEffect","useState","FormContainer","Button","Col","Form","Row","Link","useDispatch","useSelector","getUserDetails","login","register","updateUserProfile","Message","Loader","USER_UPDATE_PROFILE_FAIL","USER_UPDATE_PROFILE_RESET","ProfileScreen","history","userLogin","state","userUpdateProfile","success","userDetails","loading","error","user","userInfo","email","setEmail","name","setName","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","push","type","submitHandler","e","preventDefault","_id","target","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport FormContainer from \"../components/FormContainer\";\r\nimport {Button, Col, Form, Row} from \"react-bootstrap\";\r\nimport { Link } from 'react-router-dom'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getUserDetails, login, register, updateUserProfile} from \"../actions/userActions\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport {USER_UPDATE_PROFILE_FAIL, USER_UPDATE_PROFILE_RESET} from \"../constants/userConstants\";\r\n\r\n\r\nfunction ProfileScreen({history}) {\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const userUpdateProfile = useSelector(state => state.userUpdateProfile)\r\n    const {success} = userUpdateProfile\r\n\r\n\r\n    const userDetails = useSelector(state => state.userDetails)\r\n    const {loading,error,user} = userDetails\r\n    const {userInfo} = userLogin\r\n    const [email, setEmail] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        if(!userInfo){\r\n            history.push('/login')\r\n        }\r\n        else {\r\n            if(!user || !user.name || success){\r\n                dispatch({type:USER_UPDATE_PROFILE_RESET})\r\n                dispatch(getUserDetails('profile'))\r\n\r\n            }\r\n            else {\r\n                setName(user.name)\r\n                setEmail(user.email)\r\n            }\r\n        }\r\n\r\n    }, [dispatch,history,userInfo,user,success]);\r\n\r\n    const submitHandler=(e)=>{\r\n        e.preventDefault()\r\n        if (password != confirmPassword){\r\n            setMessage('password do not match')\r\n\r\n        }\r\n        else {\r\n            dispatch(updateUserProfile({'id':user._id,'name':name,'email':email,'password':password}))\r\n        }\r\n\r\n    }\r\n    return (\r\n        <Row>\r\n            <Col md={3}>\r\n                <h2>User Profile</h2>\r\n                {message && <Message variant='danger'>{message}</Message>}\r\n                {error && <Message variant='danger'>{error}</Message>}\r\n                {loading && <Loader />}\r\n                <Form onSubmit={submitHandler}>\r\n                    <Form.Group controlId={'name'}>\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control type='name' placeholder='enter name' value={name} onChange={(e)=>setName(e.target.value)}>\r\n\r\n                        </Form.Control>\r\n\r\n\r\n                    </Form.Group>\r\n                    <Form.Group controlId={'email'}>\r\n                        <Form.Label>Email Address</Form.Label>\r\n                        <Form.Control type='email' placeholder='enter email' value={email} onChange={(e)=>setEmail(e.target.value)}>\r\n\r\n                        </Form.Control>\r\n\r\n\r\n                    </Form.Group>\r\n                    <Form.Group controlId={'password'}>\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control type='password' placeholder='enter password' value={password} onChange={(e)=>setPassword(e.target.value)}>\r\n\r\n                        </Form.Control>\r\n\r\n\r\n                    </Form.Group>\r\n                    <Form.Group controlId={'passwordConfirm'}>\r\n                        <Form.Label>Confirm Password</Form.Label>\r\n                        <Form.Control type='password' placeholder='confirm password' value={confirmPassword} onChange={(e)=>setConfirmPassword(e.target.value)}>\r\n\r\n                        </Form.Control>\r\n\r\n\r\n                    </Form.Group>\r\n                    <Button type='submit' variant='primary'>update</Button>\r\n\r\n\r\n\r\n\r\n\r\n\r\n                </Form>\r\n\r\n\r\n            </Col>\r\n            <Col md={9}>\r\n                <h2>My Orders</h2>\r\n\r\n            </Col>\r\n\r\n        </Row>\r\n    );\r\n}\r\n\r\nexport default ProfileScreen;"]},"metadata":{},"sourceType":"module"}