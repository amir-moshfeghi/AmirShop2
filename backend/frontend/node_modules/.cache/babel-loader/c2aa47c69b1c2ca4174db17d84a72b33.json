{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Amir/Documents/AmirShop2/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Amir/Documents/AmirShop2/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{PRODUCT_CREATE_REVIEW_FAIL,PRODUCT_CREATE_REVIEW_REQUEST,PRODUCT_CREATE_REVIEW_SUCCESS,PRODUCT_DETAILS_FAIL,PRODUCT_DETAILS_REQUEST,PRODUCT_DETAILS_SUCCESS,PRODUCT_LIST_FAIL,PRODUCT_LIST_REQUEST,PRODUCT_LIST_SUCCESS}from\"../constants/productConstants\";import axios from\"axios\";import{ORDER_PAY_FAIL,ORDER_PAY_REQUEST,ORDER_PAY_SUCCESS}from\"../constants/orderConstants\";export var listProducts=function listProducts(){var keyword=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:PRODUCT_LIST_REQUEST});// async function fetchProducts(){\n_context.next=4;return axios.get(\"/api/products\".concat(keyword));case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch({type:PRODUCT_LIST_SUCCESS,payload:data});// setProducts(data)\n// }\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);dispatch({type:PRODUCT_LIST_FAIL,payload:_context.t0.response&&_context.t0.response.data.detail?_context.t0.response.data.detail:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var listProductDetails=function listProductDetails(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:PRODUCT_DETAILS_REQUEST});// async function fetchProducts(){\n_context2.next=4;return axios.get(\"/api/products/\".concat(id));case 4:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;dispatch({type:PRODUCT_DETAILS_SUCCESS,payload:data});// setProducts(data)\n// }\n_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);dispatch({type:PRODUCT_DETAILS_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.detail?_context2.t0.response.data.detail:_context2.t0.message});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var createProductReview=function createProductReview(productId,review){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState,userInfo,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:PRODUCT_CREATE_REVIEW_REQUEST});_getState=getState(),userInfo=_getState.userLogin.userInfo;config={headers:{'Content-type':'application/json','Authorization':\"Bearer \".concat(userInfo.token)}};_context3.next=6;return axios.post(\"/api/products/\".concat(productId,\"/reviews/\"),review,config);case 6:_yield$axios$post=_context3.sent;data=_yield$axios$post.data;dispatch({type:PRODUCT_CREATE_REVIEW_SUCCESS,payload:data});_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);dispatch({type:PRODUCT_CREATE_REVIEW_FAIL,payload:_context3.t0.response&&_context3.t0.response.data.detail?_context3.t0.response.data.detail:_context3.t0.message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/Amir/Documents/AmirShop2/backend/frontend/src/actions/productActions.js"],"names":["PRODUCT_CREATE_REVIEW_FAIL","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_DETAILS_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_LIST_FAIL","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","axios","ORDER_PAY_FAIL","ORDER_PAY_REQUEST","ORDER_PAY_SUCCESS","listProducts","keyword","dispatch","type","get","data","payload","response","detail","message","listProductDetails","id","createProductReview","productId","review","getState","userInfo","userLogin","config","headers","token","post"],"mappings":"+UAAA,OACIA,0BADJ,CAEIC,6BAFJ,CAGIC,6BAHJ,CAIIC,oBAJJ,CAI0BC,uBAJ1B,CAImDC,uBAJnD,CAKIC,iBALJ,CAMIC,oBANJ,CAOIC,oBAPJ,KAQO,+BARP,CASA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,cAAR,CAAwBC,iBAAxB,CAA2CC,iBAA3C,KAAmE,6BAAnE,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAACC,CAAAA,OAAD,2DAAS,EAAT,gGAAgB,iBAAOC,QAAP,4JAEpCA,QAAQ,CAAC,CAACC,IAAI,CAACT,oBAAN,CAAD,CAAR,CACA;AAHoC,sBAIXE,CAAAA,KAAK,CAACQ,GAAN,wBAA0BH,OAA1B,EAJW,uCAIzBI,IAJyB,kBAIzBA,IAJyB,CAKpCH,QAAQ,CAAC,CACLC,IAAI,CAACR,oBADA,CACqBW,OAAO,CAACD,IAD7B,CAAD,CAAR,CAGI;AAEJ;AAVoC,+EAcpCH,QAAQ,CAAC,CACLC,IAAI,CAACV,iBADA,CACkBa,OAAO,CAAC,YAAMC,QAAN,EAAkB,YAAMA,QAAN,CAAeF,IAAf,CAAoBG,MAAtC,CAA8C,YAAMD,QAAN,CAAeF,IAAf,CAAoBG,MAAlE,CAAyE,YAAMC,OADzG,CAAD,CAAR,CAdoC,oEAAhB,gEAArB,CAqBP,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,EAAD,kGAAQ,kBAAOT,QAAP,kKAElCA,QAAQ,CAAC,CAACC,IAAI,CAACZ,uBAAN,CAAD,CAAR,CACA;AAHkC,uBAIbK,CAAAA,KAAK,CAACQ,GAAN,yBAA2BO,EAA3B,EAJa,yCAI3BN,IAJ2B,mBAI3BA,IAJ2B,CAKlCH,QAAQ,CAAC,CACLC,IAAI,CAACX,uBADA,CACwBc,OAAO,CAACD,IADhC,CAAD,CAAR,CAGA;AAEA;AAVkC,mFAclCH,QAAQ,CAAC,CACLC,IAAI,CAACb,oBADA,CACqBgB,OAAO,CAAC,aAAMC,QAAN,EAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,MAAtC,CAA8C,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,MAAlE,CAAyE,aAAMC,OAD5G,CAAD,CAAR,CAdkC,sEAAR,kEAA3B,CAqBP,MAAO,IAAMG,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,SAAD,CAAWC,MAAX,kGAAsB,kBAAOZ,QAAP,CAAgBa,QAAhB,4LAEjDb,QAAQ,CAAC,CACLC,IAAI,CAACf,6BADA,CAAD,CAAR,CAFiD,UAO7C2B,QAAQ,EAPqC,CAMlCC,QANkC,WAM7CC,SAN6C,CAMlCD,QANkC,CAQ3CE,MAR2C,CAQlC,CACXC,OAAO,CAAE,CACL,eAAe,kBADV,CAEL,iCAA4BH,QAAQ,CAACI,KAArC,CAFK,CADE,CARkC,wBAc5BxB,CAAAA,KAAK,CAACyB,IAAN,yBAA4BR,SAA5B,cAAiDC,MAAjD,CAAwDI,MAAxD,CAd4B,yCAc1Cb,IAd0C,mBAc1CA,IAd0C,CAejDH,QAAQ,CAAC,CAACC,IAAI,CAACd,6BAAN,CAAoCiB,OAAO,CAACD,IAA5C,CAAD,CAAR,CAfiD,qFAoBjDH,QAAQ,CAAC,CACLC,IAAI,CAAChB,0BADA,CAC2BmB,OAAO,CAAC,aAAMC,QAAN,EAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,MAAtC,CAA8C,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,MAAlE,CAAyE,aAAMC,OADlH,CAAD,CAAR,CApBiD,uEAAtB,sEAA5B","sourcesContent":["import {\r\n    PRODUCT_CREATE_REVIEW_FAIL,\r\n    PRODUCT_CREATE_REVIEW_REQUEST,\r\n    PRODUCT_CREATE_REVIEW_SUCCESS,\r\n    PRODUCT_DETAILS_FAIL, PRODUCT_DETAILS_REQUEST, PRODUCT_DETAILS_SUCCESS,\r\n    PRODUCT_LIST_FAIL,\r\n    PRODUCT_LIST_REQUEST,\r\n    PRODUCT_LIST_SUCCESS\r\n} from \"../constants/productConstants\";\r\nimport axios from \"axios\";\r\nimport {ORDER_PAY_FAIL, ORDER_PAY_REQUEST, ORDER_PAY_SUCCESS} from \"../constants/orderConstants\";\r\n\r\nexport const listProducts = (keyword='') => async (dispatch)=>{\r\n    try {\r\n        dispatch({type:PRODUCT_LIST_REQUEST})\r\n        // async function fetchProducts(){\r\n            const {data} = await axios.get(`/api/products${keyword}`)\r\n        dispatch({\r\n            type:PRODUCT_LIST_SUCCESS,payload:data\r\n        })\r\n            // setProducts(data)\r\n\r\n        // }\r\n\r\n    }\r\n    catch (error){\r\n        dispatch({\r\n            type:PRODUCT_LIST_FAIL,payload:error.response && error.response.data.detail? error.response.data.detail:error.message,\r\n        })\r\n\r\n    }\r\n\r\n}\r\nexport const listProductDetails = (id) => async (dispatch)=>{\r\n    try {\r\n        dispatch({type:PRODUCT_DETAILS_REQUEST})\r\n        // async function fetchProducts(){\r\n        const {data} = await axios.get(`/api/products/${id}`)\r\n        dispatch({\r\n            type:PRODUCT_DETAILS_SUCCESS,payload:data\r\n        })\r\n        // setProducts(data)\r\n\r\n        // }\r\n\r\n    }\r\n    catch (error){\r\n        dispatch({\r\n            type:PRODUCT_DETAILS_FAIL,payload:error.response && error.response.data.detail? error.response.data.detail:error.message,\r\n        })\r\n\r\n    }\r\n\r\n}\r\nexport const createProductReview = (productId,review) => async (dispatch,getState)=>{\r\n    try{\r\n        dispatch({\r\n            type:PRODUCT_CREATE_REVIEW_REQUEST\r\n        })\r\n        const {\r\n            userLogin:{userInfo},\r\n        } = getState()\r\n        const config = {\r\n            headers :{\r\n                'Content-type':'application/json',\r\n                'Authorization' : `Bearer ${userInfo.token}`\r\n            }\r\n        }\r\n        const {data} = await axios.post(`/api/products/${productId}/reviews/`,review,config)\r\n        dispatch({type:PRODUCT_CREATE_REVIEW_SUCCESS,payload:data})\r\n\r\n\r\n    }\r\n    catch (error){\r\n        dispatch({\r\n            type:PRODUCT_CREATE_REVIEW_FAIL,payload:error.response && error.response.data.detail? error.response.data.detail:error.message,\r\n        })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}