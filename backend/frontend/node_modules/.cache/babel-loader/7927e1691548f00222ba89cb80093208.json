{"ast":null,"code":"import React,{useEffect,useState}from'react';import FormContainer from\"../components/FormContainer\";import{Button,Card,Col,Form,Image,ListGroup,Row}from\"react-bootstrap\";import{Link}from'react-router-dom';import{useDispatch,useSelector}from\"react-redux\";import{login,register}from\"../actions/userActions\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import{saveShippingAddress}from\"../actions/cartActions\";import CheckoutSteps from\"../components/checkoutSteps\";import{createOrder,getOrderDetails}from\"../actions/orderActions\";import{ORDER_CREATE_RESET}from\"../constants/orderConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrderScreen(_ref){var match=_ref.match;var orderId=match.params.id;var orderDetails=useSelector(function(state){return state.orderDetails;});var order=orderDetails.order,error=orderDetails.error,loading=orderDetails.loading;var dispatch=useDispatch();if(!loading&&!error){order.itemsPrice=order.orderItems.reduce(function(acc,item){return acc+item.price*item.qty;},0).toFixed(2);}useEffect(function(){if(!order||order._id!==Number(orderId)){dispatch(getOrderDetails(orderId));}},[dispatch,order,orderId]);return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Order: \",order._id]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name :\"}),order.user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email :\"}),order.user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping :\"}),order.shippingAddress.address,\",\",order.shippingAddress.city,'  ',order.shippingAddress.postalCode,\",\",'  ',order.shippingAddress.country]}),order.isDelivered?/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Delivered On\",order.deliveredAt]}):/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:\"Not Delivered\"})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method :\"}),order.paymentMethod]}),order.isPaid?/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Paid On\",order.paidAt]}):/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:\"Not Paid\"})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),order.orderItems.length===0?/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:order.orderItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" x $\",item.price,\" = $\",(item.qty*item.price).toFixed(2)]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Item:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.totalPrice]})]})})]})})})]})]});}export default OrderScreen;","map":{"version":3,"sources":["C:/Users/Amir/Documents/AmirShop2/backend/frontend/src/screens/OrderScreen.js"],"names":["React","useEffect","useState","FormContainer","Button","Card","Col","Form","Image","ListGroup","Row","Link","useDispatch","useSelector","login","register","Message","Loader","saveShippingAddress","CheckoutSteps","createOrder","getOrderDetails","ORDER_CREATE_RESET","OrderScreen","match","orderId","params","id","orderDetails","state","order","error","loading","dispatch","itemsPrice","orderItems","reduce","acc","item","price","qty","toFixed","_id","Number","user","name","email","shippingAddress","address","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","isPaid","paidAt","length","map","index","image","product","shippingPrice","taxPrice","totalPrice"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport FormContainer from \"../components/FormContainer\";\r\nimport {Button, Card, Col, Form, Image, ListGroup, Row} from \"react-bootstrap\";\r\nimport { Link } from 'react-router-dom'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {login, register} from \"../actions/userActions\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport {saveShippingAddress} from \"../actions/cartActions\";\r\nimport CheckoutSteps from \"../components/checkoutSteps\";\r\nimport {createOrder, getOrderDetails} from \"../actions/orderActions\";\r\nimport {ORDER_CREATE_RESET} from \"../constants/orderConstants\";\r\n\r\n\r\nfunction OrderScreen({match}) {\r\n    const orderId = match.params.id\r\n    const orderDetails = useSelector(state=>state.orderDetails)\r\n    const {order,error,loading} = orderDetails\r\n    const dispatch = useDispatch()\r\n    if(!loading && !error){\r\n        order.itemsPrice = order.orderItems.reduce((acc,item)=>acc+item.price *item.qty,0).toFixed(2)\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if(!order || order._id !== Number(orderId)){\r\n            dispatch(getOrderDetails(orderId))\r\n        }\r\n\r\n\r\n\r\n    }, [dispatch,order,orderId]);\r\n\r\n\r\n\r\n    return loading ? (<Loader/>) : error ? (\r\n        <Message variant='danger'>{error}</Message>\r\n    ):\r\n    (\r\n        <div>\r\n            <h1>Order: {order._id}</h1>\r\n            <Row>\r\n                <Col md={8}>\r\n                    <ListGroup variant='flush'>\r\n                        <ListGroup.Item>\r\n                            <h2>shipping</h2>\r\n                            <p><strong>Name :</strong>{order.user.name}</p>\r\n                            <p><strong>Email :</strong>{order.user.email}</p>\r\n                            <p>\r\n                                <strong>Shipping :</strong>\r\n                                {order.shippingAddress.address},{order.shippingAddress.city}\r\n                                {'  '}\r\n                                {order.shippingAddress.postalCode},\r\n                                {'  '}\r\n                                {order.shippingAddress.country}\r\n                            </p>\r\n                            {order.isDelivered ? (\r\n                                <Message variant='success'>Delivered On{order.deliveredAt}</Message>\r\n                            ) : (\r\n                                <Message variant='warning'>Not Delivered</Message>\r\n                            )}\r\n\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <h2>Payment Method</h2>\r\n                            <p>\r\n                                <strong>Method :</strong>\r\n                                {order.paymentMethod}\r\n\r\n                            </p>\r\n                            {order.isPaid ? (\r\n                                <Message variant='success'>Paid On{order.paidAt}</Message>\r\n                            ) : (\r\n                                <Message variant='warning'>Not Paid</Message>\r\n                            )}\r\n\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <h2>Order Items</h2>\r\n                            {order.orderItems.length === 0 ? <Message variant='info'>\r\n                                Your cart is empty\r\n                            </Message> : (\r\n                                <ListGroup variant='flush'>\r\n                                    {order.orderItems.map((item,index)=>(\r\n                                        <ListGroup.Item key={index}>\r\n                                            <Row>\r\n                                                <Col md={1}>\r\n                                                    <Image src={item.image} alt={item.name} fluid rounded/>\r\n                                                </Col>\r\n                                                <Col>\r\n                                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                                                </Col>\r\n                                                <Col md={4}>\r\n                                                    {item.qty} x ${item.price} = ${(item.qty * item.price).toFixed(2)}\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </ListGroup.Item>\r\n                                    ))}\r\n                                </ListGroup>\r\n                            )}\r\n                        </ListGroup.Item>\r\n                    </ListGroup>\r\n\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                        <ListGroup variant='flush'>\r\n                            <ListGroup.Item>\r\n                                <h2>Order Summary</h2>\r\n\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>\r\n                                        Item:\r\n                                    </Col>\r\n                                    <Col>${order.itemsPrice}</Col>\r\n                                </Row>\r\n\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>\r\n                                        Shipping:\r\n                                    </Col>\r\n                                    <Col>${order.shippingPrice}</Col>\r\n                                </Row>\r\n\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>\r\n                                        Tax:\r\n                                    </Col>\r\n                                    <Col>${order.taxPrice}</Col>\r\n                                </Row>\r\n\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>\r\n                                        Total:\r\n                                    </Col>\r\n                                    <Col>${order.totalPrice}</Col>\r\n                                </Row>\r\n\r\n                            </ListGroup.Item>\r\n\r\n\r\n\r\n                        </ListGroup>\r\n                    </Card>\r\n\r\n                </Col>\r\n            </Row>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderScreen;"]},"metadata":{},"sourceType":"module"}